function insertImageInCanvas(t){var e=document.getElementById("insta"),a=e.getContext("2d"),o=document.getElementById(t),n=$("#"+t).get(0).naturalWidth,i=$("#"+t).get(0).naturalHeight;e.height=i,e.width=n,a.drawImage(o,0,0)}function sendToInstagram(t,e){insertImageInCanvas(t),$("#"+t).addClass("uploaded"),$("img#"+t).after("<h1>&#10004;</h1>"),caption=localStorage.getItem(e),Instagram.share("insta",caption,function(t){t?(console.log("not shared"),localStorage.setItem("shareStatus-"+e,"shareFail")):(localStorage.setItem("shareStatus-"+e,"shareSuccess"),console.log("shared"))})}function getDropboxInfo(t){captionData="";var e="";$.get(captionListURL+"?folder="+t,function(t){t=jQuery.parseJSON(t);for(var e in t[0])localStorage.setItem(e,t[0][e])}),$.get(photoListURL+"?folder="+t,function(t){t=jQuery.parseJSON(t),$("#list").html("");for(var e=1,a="",o="",n=0;n<t.length;n++){e>3&&(e=1),1===e?row="":2===e?row="":3===e&&(row='<div class="space"></div>'),n+1===t.length&&(row='<div class="row"></div>');var i=t[n].file;photosrc="https://www.dropbox.com"+t[n].path+"?raw=1",$("#list").append('<div class="small-12 medium-4 large-4 columns share'+n+'"><a href="#" onclick="sendToInstagram(\'imageID'+n+"','"+t[n].file+'\');"><img class="previewImage" id="imageID'+n+'" src="'+photosrc+'"><div class="caption large-12 columns">'+lookupCaption(t[n].file)+"</div></a></div>"+row),checkUploadStatus(t[n].file,n),e++}})}function lookupCaption(t){return theCaption=localStorage.getItem(t),void 0!=theCaption&&""!=theCaption?theCaption:cleanFileName=convertFileNameToCaption(t)}function convertFileNameToCaption(t){return convertedCaption=t.split("."),convertedCaption=convertedCaption[0],convertedCaption=convertedCaption.replace("_"," "),convertedCaption=convertedCaption.replace("_"," "),convertedCaption=convertedCaption.replace("_"," "),convertedCaption=convertedCaption.replace("-"," "),convertedCaption=convertedCaption.replace("-"," "),convertedCaption=convertedCaption.replace("-"," "),convertedCaption=convertedCaption.replace(/[0-9]/g,"")}function checkUploadStatus(t,e){status=localStorage.getItem("shareStatus-"+t),"shareSuccess"===status&&($(".share"+e).addClass("uploaded"),$(".share"+e+" img").after("<h1>&#10004;</h1>")),"shareFail"===status?($(".share"+e).addClass("failed"),$(".share"+e+" img").after("<h1>&#10005;</h1>")):($(".share"+e).addClass("unshared"),$(".share"+e+" img").after("<h1></h1>"))}function hideShared(){$(".uploaded").hide()}function showShared(){$(".uploaded").show()}var captionListURL="http://www.yourserver.com/instaBatchCaptions.php",photoListURL="http://www.yourserver.com/instaBatchPhotos.php";captionListURL="http://design.adrian3.com/instaBatchCaptions.php",photoListURL="http://design.adrian3.com/instaBatchPhotos.php",$(document).ready(function(){getDropboxInfo("zombie-tweets")}),$(document).foundation(),Instagram.isInstalled(function(t,e){e?console.log("Instagram is",e):console.log("Instagram is not installed")});var captionData="";